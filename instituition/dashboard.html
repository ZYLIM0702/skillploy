<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css">
    <script src="https://www.gstatic.com/firebasejs/9.17.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.2/firebase-firestore.js"></script>
</head>
<body>
    <div class="container mt-4">
        <h1 class="text-center">Courses Dashboard</h1>
        <div class="card mt-4">
            <div class="card-body">
                <div class="mb-3">
                    <label for="filter-faculty" class="form-label">Filter by Faculty</label>
                    <select id="filter-faculty" class="form-select">
                        <option value="all">All</option>
                        <option value="Science">Science</option>
                        <option value="Engineering">Engineering</option>
                        <option value="Business">Business</option>
                        <option value="Arts">Arts</option>
                    </select>
                </div>
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th>Course Title</th>
                            <th>Faculty</th>
                            <th>Modules</th>
                        </tr>
                    </thead>
                    <tbody id="course-table">
                        <!-- Dynamic rows here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_PROJECT_ID.appspot.com",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        // Initialize Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore(app);

        const courseTable = document.getElementById('course-table');
        const filterFaculty = document.getElementById('filter-faculty');

        const renderCourses = (courses) => {
            courseTable.innerHTML = '';
            courses.forEach(course => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${course.title}</td>
                    <td>${course.faculty}</td>
                    <td>${course.modules.join(', ')}</td>
                `;
                courseTable.appendChild(row);
            });
        };

        const fetchCourses = async (faculty = 'all') => {
            let query = db.collection('courses');
            if (faculty !== 'all') {
                query = query.where('faculty', '==', faculty);
            }

            const snapshot = await query.get();
            const courses = snapshot.docs.map(doc => doc.data());
            renderCourses(courses);
        };

        filterFaculty.addEventListener('change', () => {
            const selectedFaculty = filterFaculty.value;
            fetchCourses(selectedFaculty);
        });

        // Initial fetch
        fetchCourses();
    </script>
</body>
</html>
